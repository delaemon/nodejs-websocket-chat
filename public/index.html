<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script>
        function send() {
            ws.send(document.getElementById('name').value +": "+ document.getElementById('message').value);
        }

        var host = window.document.location.host.replace(/:.*/, '');
        var ws = new WebSocket('ws://' + host + ':3000');
        ws.onmessage = function (event) {
            var dataList = JSON.parse(event.data);
            dataList.forEach(function (data, i){
                var bg = "bg" + (i % 2)
                document.getElementById("messages").innerHTML += "<div class=" + bg + ">" + data + "</div>";
                console.log(data);
            });
        };
    </script>
</head>
<body>
<strong>websocket chat</strong><br />
<div>
    <p><input type="text" id="name" value="name"/></p>
    <textarea id="message"/>message</textarea>
</div>
<input type="button" value="send" onclick="send()" />
<br />
<hr />
<div id="messages"/>
</body>
</html>
